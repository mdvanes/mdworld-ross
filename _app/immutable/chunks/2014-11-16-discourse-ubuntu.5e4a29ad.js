import{S as _o,i as Io,s as Eo,k as r,q as i,a as p,l as n,m as u,r as a,h as t,c,n as f,b as l,D as s,E as Tt}from"./index.ce9a7868.js";function yo(eo){let d,He,b,Fe,Le,k,Ne,Ge,se,w,We,g,je,Ve,le,x,Q,ze,ie,v,Be,S,Je,Ke,ae,P,to=`<code class="language-undefined">wget -qO- https://get.docker.io/ | sh
mkdir /var/docker
git clone https://github.com/discourse/discourse_docker.git /var/docker
cd /var/docker
cp samples/standalone.yml containers/app.yml</code>`,re,U,Qe,ne,D,oo='<code class="language-undefined">DISCOURSE_HOSTNAME: &#39;localhost&#39;</code>',ue,_,Xe,X,Ye,Ze,pe,T,so='<code class="language-undefined">2014/11/16 10:46:31 Error response from daemon: Cannot start container 270d47cd8401c50f13e0a1e51428f5b9833a9480b53bc98735df55b425a70b6d: Error starting userland proxy: listen tcp 0.0.0.0:80: bind: address already in use</code>',ce,H,$e,fe,F,et,de,O,lo=`<code class="language-undefined">expose:
  - &quot;80:80&quot;   # fwd host port 80   to container port 80 (http)
  - &quot;2222:22&quot; # fwd host port 2222 to container port 22 (ssh)</code>`,he,I,tt,Y,ot,st,me,L,lt,we,q,io=`<code class="language-undefined">cd /var/docker
sudo ./launcher rebuild app # this applies the changes
sudo ./launcher start app</code>`,ve,N,it,_e,G,at,Ie,E,rt,Z,nt,ut,Ee,h,pt,$,ct,ft,R,dt,ht,ye,y,mt,ee,wt,vt,be,M,ao=`<code class="language-undefined">ERROR: python yaml module not installed - run the following and try again:

sudo apt-get install python3-yaml</code>`,ke,W,_t,ge,j,It,Se,V,Et,Pe,A,ro=`<code class="language-undefined">Traceback (most recent call last):
  File &quot;/var/docker/scripts/mailtest&quot;, line 138, in &lt;module&gt;
    smtp = smtplib.SMTP(smtp_addr, smtp_port, timeout=5)
  File &quot;/usr/lib/python3.4/smtplib.py&quot;, line 242, in __init__
    (code, msg) = self.connect(host, port)
  File &quot;/usr/lib/python3.4/smtplib.py&quot;, line 321, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File &quot;/usr/lib/python3.4/smtplib.py&quot;, line 292, in _get_socket
    self.source_address)
  File &quot;/usr/lib/python3.4/socket.py&quot;, line 509, in create_connection
    raise err
  File &quot;/usr/lib/python3.4/socket.py&quot;, line 500, in create_connection
    sock.connect(sa)
OSError: [Errno 113] No route to host</code>`,De,z,yt,Te,B,bt,Oe,C,no=`<code class="language-undefined">expose:
  - &quot;8080:80&quot;  # fwd host port 80   to container port 80 (http)
  - &quot;2222:22&quot;  # fwd host port 2222 to container port 22 (ssh)

  DISCOURSE_DEVELOPER_EMAILS: &#39;myemail@example.com&#39;

  DISCOURSE_HOSTNAME: &#39;localhost&#39;

  DISCOURSE_SMTP_ADDRESS: smtp.gmail.com
  DISCOURSE_SMTP_PORT: 587
  DISCOURSE_SMTP_USER_NAME: mygmail@gmail.com
  DISCOURSE_SMTP_PASSWORD: ******</code>`,qe,m,kt,te,gt,St,oe,Pt,Dt;return{c(){d=r("p"),He=i("I wanted to try and use "),b=r("a"),Fe=i("Docker"),Le=i(" after hearing such great things about it. Since I might want to roll out a decent forum at some point, I wanted to look into installing "),k=r("a"),Ne=i("Discourse"),Ge=i(". For the moment, this will be done on my desktop."),se=p(),w=r("p"),We=i("I start with the "),g=r("a"),je=i("installation instructions"),Ve=i(" for Docker on Ubuntu 14.04."),le=p(),x=r("ul"),Q=r("li"),ze=i("For Discourse it’s needed to follow the instructions for the newest version of Docker and not to use the default Ubuntu package."),ie=p(),v=r("p"),Be=i("I proceed with "),S=r("a"),Je=i("this tutorial"),Ke=i(" that specifies to run:"),ae=p(),P=r("pre"),re=p(),U=r("p"),Qe=i("I modify /var/docker/containers/app.yml (all relevant changes to app.yml are at the bottom)"),ne=p(),D=r("pre"),ue=p(),_=r("p"),Xe=i("but on running start "),X=r("code"),Ye=i("sudo ./launcher start app"),Ze=i(" I get:"),pe=p(),T=r("pre"),ce=p(),H=r("p"),$e=i("This could be expected, because Apache runs on port 80."),fe=p(),F=r("p"),et=i("in /var/docker/containers/app.yml there is an entry:"),de=p(),O=r("pre"),he=p(),I=r("p"),tt=i("After using "),Y=r("code"),ot=i("netstat -antp"),st=i(" to confirm port 8080 is unused, I change 80:80 to 8080:80 in the app.yml."),me=p(),L=r("p"),lt=i("Now I rebuild and restart the container:"),we=p(),q=r("pre"),ve=p(),N=r("p"),it=i("When I use the browser to go to http://localhost:8080/, it immediately gives me Discourse page!"),_e=p(),G=r("p"),at=i("Now I notice, when creating the admin account, that the activation mail is not send. Thinking back I did skip over the mail settings in the app.yml."),Ie=p(),E=r("p"),rt=i("Here I had to experiment a bit with my mail settings and this turned out in the end what took most of the time for getting Discourse up and running. One thing I learned is that it’s not neccesary to stop the app with "),Z=r("code"),nt=i("sudo ./launcher stop app"),ut=i(" before making changes or rebuilding."),Ee=p(),h=r("p"),pt=i("Soon I find that running "),$=r("code"),ct=i("sudo ./launcher mailtest app"),ft=i(" gives much more useful information, thanks to "),R=r("a"),dt=i("this thread"),ht=i("."),ye=p(),y=r("p"),mt=i("I configure the app.yml to use the Google smtp server (settings are below), but "),ee=r("code"),wt=i("sudo ./launcher mailtest app"),vt=i(" still gives an error:"),be=p(),M=r("pre"),ke=p(),W=r("p"),_t=i("After installing this package mailtest tells me there is an authentication problem and apparently I need to allow “less secure apps” access to my gmail account. After setting this up at Google accounts, I can send mail with mailtest."),ge=p(),j=r("p"),It=i("The activate mail link is now send and I can access the admin panel in Discourse."),Se=p(),V=r("p"),Et=i("I have also tried to set up mail with the SMTP settings of my own ISP, but this gave an error that I could not find any solutions to:"),Pe=p(),A=r("pre"),De=p(),z=r("p"),yt=i("Since I never use my ISP’s mail server, it might simply be that I use the wrong SMTP address or something."),Te=p(),B=r("p"),bt=i("In the end, I use these setting in my app.yml (these are just the edited fragments):"),Oe=p(),C=r("pre"),qe=p(),m=r("p"),kt=i("I wonder now, since I’m starting discourse now with "),te=r("code"),gt=i("./launcher start app"),St=i(" if I should have renamed the containers/app.yml to discourse.yml to be able to start Discourse with "),oe=r("code"),Pt=i("./launcher start discourse"),Dt=i("? I don’t know how difficult (or easy?) it will be to change this afterwards, but I will leave it for another time to figure this out."),this.h()},l(e){d=n(e,"P",{});var o=u(d);He=a(o,"I wanted to try and use "),b=n(o,"A",{href:!0,rel:!0});var Ot=u(b);Fe=a(Ot,"Docker"),Ot.forEach(t),Le=a(o," after hearing such great things about it. Since I might want to roll out a decent forum at some point, I wanted to look into installing "),k=n(o,"A",{href:!0,rel:!0});var qt=u(k);Ne=a(qt,"Discourse"),qt.forEach(t),Ge=a(o,". For the moment, this will be done on my desktop."),o.forEach(t),se=c(e),w=n(e,"P",{});var Re=u(w);We=a(Re,"I start with the "),g=n(Re,"A",{href:!0,rel:!0});var Rt=u(g);je=a(Rt,"installation instructions"),Rt.forEach(t),Ve=a(Re," for Docker on Ubuntu 14.04."),Re.forEach(t),le=c(e),x=n(e,"UL",{});var Mt=u(x);Q=n(Mt,"LI",{});var At=u(Q);ze=a(At,"For Discourse it’s needed to follow the instructions for the newest version of Docker and not to use the default Ubuntu package."),At.forEach(t),Mt.forEach(t),ie=c(e),v=n(e,"P",{});var Me=u(v);Be=a(Me,"I proceed with "),S=n(Me,"A",{href:!0,rel:!0});var Ct=u(S);Je=a(Ct,"this tutorial"),Ct.forEach(t),Ke=a(Me," that specifies to run:"),Me.forEach(t),ae=c(e),P=n(e,"PRE",{class:!0});var uo=u(P);uo.forEach(t),re=c(e),U=n(e,"P",{});var xt=u(U);Qe=a(xt,"I modify /var/docker/containers/app.yml (all relevant changes to app.yml are at the bottom)"),xt.forEach(t),ne=c(e),D=n(e,"PRE",{class:!0});var po=u(D);po.forEach(t),ue=c(e),_=n(e,"P",{});var Ae=u(_);Xe=a(Ae,"but on running start "),X=n(Ae,"CODE",{});var Ut=u(X);Ye=a(Ut,"sudo ./launcher start app"),Ut.forEach(t),Ze=a(Ae," I get:"),Ae.forEach(t),pe=c(e),T=n(e,"PRE",{class:!0});var co=u(T);co.forEach(t),ce=c(e),H=n(e,"P",{});var Ht=u(H);$e=a(Ht,"This could be expected, because Apache runs on port 80."),Ht.forEach(t),fe=c(e),F=n(e,"P",{});var Ft=u(F);et=a(Ft,"in /var/docker/containers/app.yml there is an entry:"),Ft.forEach(t),de=c(e),O=n(e,"PRE",{class:!0});var fo=u(O);fo.forEach(t),he=c(e),I=n(e,"P",{});var Ce=u(I);tt=a(Ce,"After using "),Y=n(Ce,"CODE",{});var Lt=u(Y);ot=a(Lt,"netstat -antp"),Lt.forEach(t),st=a(Ce," to confirm port 8080 is unused, I change 80:80 to 8080:80 in the app.yml."),Ce.forEach(t),me=c(e),L=n(e,"P",{});var Nt=u(L);lt=a(Nt,"Now I rebuild and restart the container:"),Nt.forEach(t),we=c(e),q=n(e,"PRE",{class:!0});var ho=u(q);ho.forEach(t),ve=c(e),N=n(e,"P",{});var Gt=u(N);it=a(Gt,"When I use the browser to go to http://localhost:8080/, it immediately gives me Discourse page!"),Gt.forEach(t),_e=c(e),G=n(e,"P",{});var Wt=u(G);at=a(Wt,"Now I notice, when creating the admin account, that the activation mail is not send. Thinking back I did skip over the mail settings in the app.yml."),Wt.forEach(t),Ie=c(e),E=n(e,"P",{});var xe=u(E);rt=a(xe,"Here I had to experiment a bit with my mail settings and this turned out in the end what took most of the time for getting Discourse up and running. One thing I learned is that it’s not neccesary to stop the app with "),Z=n(xe,"CODE",{});var jt=u(Z);nt=a(jt,"sudo ./launcher stop app"),jt.forEach(t),ut=a(xe," before making changes or rebuilding."),xe.forEach(t),Ee=c(e),h=n(e,"P",{});var J=u(h);pt=a(J,"Soon I find that running "),$=n(J,"CODE",{});var Vt=u($);ct=a(Vt,"sudo ./launcher mailtest app"),Vt.forEach(t),ft=a(J," gives much more useful information, thanks to "),R=n(J,"A",{href:!0,rel:!0});var zt=u(R);dt=a(zt,"this thread"),zt.forEach(t),ht=a(J,"."),J.forEach(t),ye=c(e),y=n(e,"P",{});var Ue=u(y);mt=a(Ue,"I configure the app.yml to use the Google smtp server (settings are below), but "),ee=n(Ue,"CODE",{});var Bt=u(ee);wt=a(Bt,"sudo ./launcher mailtest app"),Bt.forEach(t),vt=a(Ue," still gives an error:"),Ue.forEach(t),be=c(e),M=n(e,"PRE",{class:!0});var mo=u(M);mo.forEach(t),ke=c(e),W=n(e,"P",{});var Jt=u(W);_t=a(Jt,"After installing this package mailtest tells me there is an authentication problem and apparently I need to allow “less secure apps” access to my gmail account. After setting this up at Google accounts, I can send mail with mailtest."),Jt.forEach(t),ge=c(e),j=n(e,"P",{});var Kt=u(j);It=a(Kt,"The activate mail link is now send and I can access the admin panel in Discourse."),Kt.forEach(t),Se=c(e),V=n(e,"P",{});var Qt=u(V);Et=a(Qt,"I have also tried to set up mail with the SMTP settings of my own ISP, but this gave an error that I could not find any solutions to:"),Qt.forEach(t),Pe=c(e),A=n(e,"PRE",{class:!0});var wo=u(A);wo.forEach(t),De=c(e),z=n(e,"P",{});var Xt=u(z);yt=a(Xt,"Since I never use my ISP’s mail server, it might simply be that I use the wrong SMTP address or something."),Xt.forEach(t),Te=c(e),B=n(e,"P",{});var Yt=u(B);bt=a(Yt,"In the end, I use these setting in my app.yml (these are just the edited fragments):"),Yt.forEach(t),Oe=c(e),C=n(e,"PRE",{class:!0});var vo=u(C);vo.forEach(t),qe=c(e),m=n(e,"P",{});var K=u(m);kt=a(K,"I wonder now, since I’m starting discourse now with "),te=n(K,"CODE",{});var Zt=u(te);gt=a(Zt,"./launcher start app"),Zt.forEach(t),St=a(K," if I should have renamed the containers/app.yml to discourse.yml to be able to start Discourse with "),oe=n(K,"CODE",{});var $t=u(oe);Pt=a($t,"./launcher start discourse"),$t.forEach(t),Dt=a(K,"? I don’t know how difficult (or easy?) it will be to change this afterwards, but I will leave it for another time to figure this out."),K.forEach(t),this.h()},h(){f(b,"href","https://www.docker.com/"),f(b,"rel","nofollow"),f(k,"href","http://www.discourse.org/"),f(k,"rel","nofollow"),f(g,"href","http://docs.docker.com/installation/ubuntulinux/"),f(g,"rel","nofollow"),f(S,"href","http://www.howtoinstalldiscourse.com/how-to-install-discourse-on-ubuntu/"),f(S,"rel","nofollow"),f(P,"class","language-undefined"),f(D,"class","language-undefined"),f(T,"class","language-undefined"),f(O,"class","language-undefined"),f(q,"class","language-undefined"),f(R,"href","https://meta.discourse.org/t/discourse-new-install-registration-emails-not-sent-because-from-address-cant-be-changed/16663/11"),f(R,"rel","nofollow"),f(M,"class","language-undefined"),f(A,"class","language-undefined"),f(C,"class","language-undefined")},m(e,o){l(e,d,o),s(d,He),s(d,b),s(b,Fe),s(d,Le),s(d,k),s(k,Ne),s(d,Ge),l(e,se,o),l(e,w,o),s(w,We),s(w,g),s(g,je),s(w,Ve),l(e,le,o),l(e,x,o),s(x,Q),s(Q,ze),l(e,ie,o),l(e,v,o),s(v,Be),s(v,S),s(S,Je),s(v,Ke),l(e,ae,o),l(e,P,o),P.innerHTML=to,l(e,re,o),l(e,U,o),s(U,Qe),l(e,ne,o),l(e,D,o),D.innerHTML=oo,l(e,ue,o),l(e,_,o),s(_,Xe),s(_,X),s(X,Ye),s(_,Ze),l(e,pe,o),l(e,T,o),T.innerHTML=so,l(e,ce,o),l(e,H,o),s(H,$e),l(e,fe,o),l(e,F,o),s(F,et),l(e,de,o),l(e,O,o),O.innerHTML=lo,l(e,he,o),l(e,I,o),s(I,tt),s(I,Y),s(Y,ot),s(I,st),l(e,me,o),l(e,L,o),s(L,lt),l(e,we,o),l(e,q,o),q.innerHTML=io,l(e,ve,o),l(e,N,o),s(N,it),l(e,_e,o),l(e,G,o),s(G,at),l(e,Ie,o),l(e,E,o),s(E,rt),s(E,Z),s(Z,nt),s(E,ut),l(e,Ee,o),l(e,h,o),s(h,pt),s(h,$),s($,ct),s(h,ft),s(h,R),s(R,dt),s(h,ht),l(e,ye,o),l(e,y,o),s(y,mt),s(y,ee),s(ee,wt),s(y,vt),l(e,be,o),l(e,M,o),M.innerHTML=ao,l(e,ke,o),l(e,W,o),s(W,_t),l(e,ge,o),l(e,j,o),s(j,It),l(e,Se,o),l(e,V,o),s(V,Et),l(e,Pe,o),l(e,A,o),A.innerHTML=ro,l(e,De,o),l(e,z,o),s(z,yt),l(e,Te,o),l(e,B,o),s(B,bt),l(e,Oe,o),l(e,C,o),C.innerHTML=no,l(e,qe,o),l(e,m,o),s(m,kt),s(m,te),s(te,gt),s(m,St),s(m,oe),s(oe,Pt),s(m,Dt)},p:Tt,i:Tt,o:Tt,d(e){e&&t(d),e&&t(se),e&&t(w),e&&t(le),e&&t(x),e&&t(ie),e&&t(v),e&&t(ae),e&&t(P),e&&t(re),e&&t(U),e&&t(ne),e&&t(D),e&&t(ue),e&&t(_),e&&t(pe),e&&t(T),e&&t(ce),e&&t(H),e&&t(fe),e&&t(F),e&&t(de),e&&t(O),e&&t(he),e&&t(I),e&&t(me),e&&t(L),e&&t(we),e&&t(q),e&&t(ve),e&&t(N),e&&t(_e),e&&t(G),e&&t(Ie),e&&t(E),e&&t(Ee),e&&t(h),e&&t(ye),e&&t(y),e&&t(be),e&&t(M),e&&t(ke),e&&t(W),e&&t(ge),e&&t(j),e&&t(Se),e&&t(V),e&&t(Pe),e&&t(A),e&&t(De),e&&t(z),e&&t(Te),e&&t(B),e&&t(Oe),e&&t(C),e&&t(qe),e&&t(m)}}}const ko={title:"Discourse on Ubuntu 14.04",cover:"https://picsum.photos/g/800/600?image=0",date:"16-11-2014",category:"mypc",tags:["mypc"],preview:`I wanted to try and use Docker after hearing such great things about it. Since I might want to roll out a decent forum at some point, I wanted to look into installing Discourse. For the moment, this will be done on my desktop.

I start with the...`,previewHtml:'<p>I wanted to try and use <a href="https://www.docker.com/" rel="nofollow">Docker</a> after hearing such great things about it. Since I might want to roll out a decent forum at some point, I wanted to look into installing <a href="http://www.discourse.org/" rel="nofollow">Discourse</a>. For the moment, this will be done on my desktop.</p> <p>I start with the <a href="http://docs.docker.com/installation/ubuntulinux/" rel="nofollow">instal...</a></p>'};class go extends _o{constructor(d){super(),Io(this,d,null,yo,Eo,{})}}export{go as default,ko as metadata};
