import{S as Ht,i as Ct,s as Rt,k as p,q as c,a as r,l as o,m as l,r as i,h as a,c as u,n as k,b as t,D as e,E as bn}from"./index.ce9a7868.js";function Lt(pt){let f,ha,E,ya,wa,Is,O,ba,gs,d,va,hs,Ea,Ia,ys,ga,_a,I,ja,Sa,_s,$,xa,js,D,Pa,Ss,g,ot='<code class="language-bash"><span class="token function">npm</span> i --save-dev webpack webpack-dev-server webpack-merge grunt-webpack babel-core babel-loader babel-preset-2015</code>',xs,m,Ta,_,Ma,Aa,j,Fa,qa,S,Ha,Ca,Ps,x,lt='<code class="language-bash"><span class="token function">npm</span> i --save-dev grunt-eslint</code>',Ts,V,Ra,Ms,P,ct=`<code class="language-javascript"><span class="token literal-property property">eslint</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">configFile</span><span class="token operator">:</span> <span class="token string">'.eslintrc'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">dev</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'_js/**/*.js'</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

<span class="token literal-property property">webpack</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> webpackConfig<span class="token punctuation">,</span>
    <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code>`,As,z,La,Fs,G,ws,Ba,qs,T,it=`<code class="language-javascript"><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> common <span class="token operator">=</span> <span class="token punctuation">&#123;</span>

    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./_js/app.js'</span><span class="token punctuation">,</span>

    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>

    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                    <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'es2015'</span><span class="token punctuation">]</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> common<span class="token punctuation">;</span></code>`,Hs,N,bs,Ka,Cs,M,rt=`<code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"parserOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"ecmaVersion"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token property">"sourceType"</span><span class="token operator">:</span> <span class="token string">"module"</span><span class="token punctuation">,</span>
    <span class="token property">"ecmaFeatures"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"env"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"browser"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"es6"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"no-bitwise"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"curly"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"eqeqeq"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"no-use-before-define"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"new-cap"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"no-caller"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"no-undef"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"no-unused-vars"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"args"</span><span class="token operator">:</span> <span class="token string">"none"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"no-trailing-spaces"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"function"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"quotes"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"single"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"complexity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code>`,Rs,U,Wa,Ls,Y,Ja,Bs,A,ut=`<code class="language-javascript"><span class="token keyword">import</span> otherCustomModelFactory <span class="token keyword">from</span> <span class="token string">'./es6/viewmodels/otherCustomModelFactory'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> otherCustomTemplateFactory <span class="token keyword">from</span> <span class="token string">'./es6/otherCustomTemplateFactory'</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>bqApp <span class="token operator">&amp;&amp;</span> blueriq<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    bqApp<span class="token punctuation">.</span>modelFactory<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>otherCustomModelFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    bqApp<span class="token punctuation">.</span>templateFactory<span class="token punctuation">.</span><span class="token function">registerModelHandler</span><span class="token punctuation">(</span>otherCustomTemplateFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`,Ks,Q,Oa,Ws,X,$a,Js,h,Z,vs,Da,Va,za,ss,Es,Ga,Na,Os,as,Ua,$s,ns,Ya,Ds,ts,Qa,Vs,F,kt=`<code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ko<span class="token punctuation">,</span> blueriq</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">FooModel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        blueriq<span class="token punctuation">.</span>models<span class="token punctuation">.</span><span class="token function">BaseModel</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> model<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>ko<span class="token punctuation">,</span> window<span class="token punctuation">.</span>blueriq<span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,zs,es,Xa,Gs,q,dt=`<code class="language-javascript"><span class="token comment">/* globals blueriq:false */</span>

<span class="token comment">// I want to extend blueriq.models.dashboard.PageModel (which is an old-fashioned ES5 class). This works!</span>

<span class="token keyword">class</span> <span class="token class-name">PageModel</span> <span class="token keyword">extends</span> <span class="token class-name">blueriq<span class="token punctuation">.</span>models<span class="token punctuation">.</span>dashboard<span class="token punctuation">.</span>PageModel</span> <span class="token punctuation">&#123;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new es6 PageModel'</span><span class="token punctuation">,</span> model<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> PageModel<span class="token punctuation">;</span></code>`,Ns,ps,Za,Us,H,mt=`<code class="language-javascript"><span class="token keyword">import</span> PageModel <span class="token keyword">from</span> <span class="token string">'./PageModel'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">otherCustomModelFactory</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">otherCustomModelFactory</span><span class="token punctuation">(</span><span class="token parameter">model<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'page'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageModel</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> otherCustomModelFactory<span class="token punctuation">;</span></code>`,Ys,os,sn,Qs,ls,an,Xs,cs,nn,Zs,C,ft=`<code class="language-javascript"><span class="token comment">/* globals blueriq */</span>

<span class="token keyword">const</span> <span class="token function-variable function">otherCustomTemplateFactory</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">otherCustomTemplateFactory</span><span class="token punctuation">(</span><span class="token parameter">viewModel<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>viewModel<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'field'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token string">'themes/myTheme/template/field'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> otherCustomTemplateFactory<span class="token punctuation">;</span></code>`,sa,y,tn,R,en,pn,aa,L,ht=`<code class="language-javascript"><span class="token comment">/* globals blueriq */</span>
<span class="token keyword">import</span> fieldTemplate <span class="token keyword">from</span> <span class="token string">'./template/field.html'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">otherCustomTemplateFactory</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">otherCustomTemplateFactory</span><span class="token punctuation">(</span><span class="token parameter">viewModel<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>viewModel<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'field'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> fieldTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> otherCustomTemplateFactory<span class="token punctuation">;</span></code>`,na,is,on,ta,w,ln,B,cn,rn,ea,K,yt=`<code class="language-javascript">ko<span class="token punctuation">.</span>bindingHandlers<span class="token punctuation">.</span>clickTester <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'you clicked it!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>`,pa,rs,un,oa,us,kn,la,W,wt=`<code class="language-javascript"><span class="token comment">/* globals $:false */</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> clickTester <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">$</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'You clicked the ES6 KO Handler!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>`,ca,ks,dn,ia,J,bt=`<code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>clickTester<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./es6/handlers/clickTester'</span><span class="token punctuation">;</span>
ko<span class="token punctuation">.</span>bindingHandlers<span class="token punctuation">.</span>clickTester <span class="token operator">=</span> clickTester<span class="token punctuation">;</span></code>`,ra,ds,mn,ua,ms,fn,ka,fs,hn;return{c(){f=p("p"),ha=c("In the past year I’ve made some ES6 projects, for instance "),E=p("a"),ya=c("HomeRemote"),wa=c(", an ES6 flavored React project. My company mainly uses a KnockoutJS based theme and it would be an improvement to introduce ES6 to this theme. The combination of Knockout and ES6 is not very common, so I’ve summarized my endeavors."),Is=r(),O=p("h1"),ba=c("Precompiling with Webpack"),gs=r(),d=p("p"),va=c("Because I want to use ES6 classes and native modules, which are respectively "),hs=p("em"),Ea=c("not well"),Ia=c(" and "),ys=p("em"),ga=c("not at all"),_a=c(" supported cross browser, I will use a transpiler. Because I will want to look into component based development, I choose "),I=p("a"),ja=c("Webpack"),Sa=c(", also because it is pluggable and has e.g. Typescript support."),_s=r(),$=p("p"),xa=c("Although I am aware of the advantages of TypeScript and it’s adoption should increase with the advent of Angular 2, I will stick with plain ES6 for the moment, to stay as close as possible to the native syntax."),js=r(),D=p("p"),Pa=c("It is not very clear how to install all the needed dependencies for ES6 compilation with Webpack. It does give feedback on missing modules when running, so with some trial and error, this should be the installer command:"),Ss=r(),g=p("pre"),xs=r(),m=p("p"),Ta=c("Because "),_=p("a"),Ma=c("JShint"),Aa=c(" and "),j=p("a"),Fa=c("JSCS"),qa=c(" do not support ES6 syntax, I replace them with "),S=p("a"),Ha=c("ESlint"),Ca=c(":"),Ps=r(),x=p("pre"),Ts=r(),V=p("p"),Ra=c("I integrate Webpack and ESlint into Grunt, this is very straight-forward:"),Ms=r(),P=p("pre"),As=r(),z=p("p"),La=c("Both Webpack and ESlint changed the syntax for their configuration since the last time I used it, my configs look like this now:"),Fs=r(),G=p("ul"),ws=p("li"),Ba=c("Webpack 1.13.0"),qs=r(),T=p("pre"),Hs=r(),N=p("ul"),bs=p("li"),Ka=c("ESlint (grunt-eslint 18.1.0)"),Cs=r(),M=p("pre"),Rs=r(),U=p("h1"),Wa=c("The Entrypoint"),Ls=r(),Y=p("p"),Ja=c("The file app.js is the main entrypoint. It imports all the factories and classes as dependencies and registers them to our application API (bqApp). E.g.:"),Bs=r(),A=p("pre"),Ks=r(),Q=p("p"),Oa=c(`The registering used to be done in e.g. the customModelFactory file itself, but when using ES6 modules, I started to notice how this requires a dependency to bqApp in the customModelFactory file, while it’s only needed for registering the factory. For the sake of
high cohesion, I decided to export the finished factory and register it in the app.js instead.`),Ws=r(),X=p("p"),$a=c("In advance, one of my main concerns was handling existing variables that the application API puts on the global scope, because the API is not yet in ES6 style. Fortunately, in contrast to Typescript it is not needed to have typing definitions, making it trivial to mix ES5 and ES6 libraries in one app. Because ES6 modules are used in the app.js, it is no longer needed to use an IIFE for scoping (the ES6 modules are scoped at the file level anyway) or strict mode declaration (implicit, because strict mode indicates ES5 syntax). This does mean I need an alternative way to reference global variables. E.g. the bqApp variable is put on the global scope by the application API, which I can’t change at the moment, instead of being exposed as an importable module. Supposedly, it would be possible to wrap it in a file that converts the global to a module. For the short term I see two options, though:"),Js=r(),h=p("ol"),Z=p("li"),vs=p("code"),Da=c("/* global bqApp:false */"),Va=c(" - this works because the var is on the global scope, it’s just ESlint who warns for undefined variables."),za=r(),ss=p("li"),Es=p("code"),Ga=c("const bqApp = window.bqApp;"),Na=c(" - explicitly reassinging to a local variable, which is basically what I used to do when supplying window.bqApp as a parameter to an IIFE, and then declaring bqApp as an argument in that IIFE."),Os=r(),as=p("p"),Ua=c("For the moment I will stick with option 1, although I have included an example of both just to be complete."),$s=r(),ns=p("h1"),Ya=c("Viewmodels and the viewmodel factory"),Ds=r(),ts=p("p"),Qa=c("Most viewmodels that we use extend from some existing viewmodel that is build into the application API, such as blueriq.models.BaseModel. A very simple example:"),Vs=r(),F=p("pre"),zs=r(),es=p("p"),Xa=c("As said, I was concerned about using existing variables from the application API. I had no idea how the ES6 “extend” would convert to ES5, but fortunately it seems to be backwards compatible with the approach above, because this simply works:"),Gs=r(),q=p("pre"),Ns=r(),ps=p("p"),Za=c("Now PageModel can be imported into the modelFactory, which decides what viewModel to use based on properties of the provided model."),Us=r(),H=p("pre"),Ys=r(),os=p("p"),sn=c("It has already been shown how otherCustomModelFactory is imported and registered in app.js."),Qs=r(),ls=p("h1"),an=c("Templates"),Xs=r(),cs=p("p"),nn=c("Creating a templateFactory, which decides what template to use based on properties of the provided model, is nearly identical to the modelFactory:"),Zs=r(),C=p("pre"),sa=r(),y=p("p"),tn=c("At this moment, the factory just returns the id of the template. The template itself is requested from the filesystem by the "),R=p("a"),en=c("koExternalTemplateEngine"),pn=c(" (this project has been retired for several years now) or with a custom solution that reads the template from a file that contains all templates. A very important improvement that could be made here is using Webpack to resolve the paths to the templates. It should be possible to write a custom loader that retrieves the contents of a template that is being imported, e.g. like this:"),aa=r(),L=p("pre"),na=r(),is=p("h1"),on=c("Custom Binding Handlers"),ta=r(),w=p("p"),ln=c("Knockout "),B=p("a"),cn=c("handlers"),rn=c(" need to be registered to ko.bindingHandlers, e.g. like this:"),ea=r(),K=p("pre"),pa=r(),rs=p("p"),un=c("If I would put this in a module, nothing would be exported. I still need to look into how the system would handle this. Probably it will just execute adding the bindinghandler and return nothing, but for the moment I just export the body of the handler and import and register it in our app.js."),oa=r(),us=p("p"),kn=c("In handlers/clickTester.js:"),la=r(),W=p("pre"),ca=r(),ks=p("p"),dn=c("In app.js:"),ia=r(),J=p("pre"),ra=r(),ds=p("h1"),mn=c("Follow up"),ua=r(),ms=p("p"),fn=c("I still need to improve the registration of handlers, I don’t know if I want them all in my app.js or maybe in a separate file. In that case I will need to figure out how to export “nothing” to my app.js, otherwise the import statement might fail."),ka=r(),fs=p("p"),hn=c("So far, our product does not use Knockout components. The style of component based development is very similar to React or Angular 2.0 components, although in practice, it might be closer to Angular 1.x directives. It would be interesting to see how it would translate to the ES6 syntax."),this.h()},l(s){f=o(s,"P",{});var n=l(f);ha=i(n,"In the past year I’ve made some ES6 projects, for instance "),E=o(n,"A",{href:!0,rel:!0});var vn=l(E);ya=i(vn,"HomeRemote"),vn.forEach(a),wa=i(n,", an ES6 flavored React project. My company mainly uses a KnockoutJS based theme and it would be an improvement to introduce ES6 to this theme. The combination of Knockout and ES6 is not very common, so I’ve summarized my endeavors."),n.forEach(a),Is=u(s),O=o(s,"H1",{});var En=l(O);ba=i(En,"Precompiling with Webpack"),En.forEach(a),gs=u(s),d=o(s,"P",{});var b=l(d);va=i(b,"Because I want to use ES6 classes and native modules, which are respectively "),hs=o(b,"EM",{});var In=l(hs);Ea=i(In,"not well"),In.forEach(a),Ia=i(b," and "),ys=o(b,"EM",{});var gn=l(ys);ga=i(gn,"not at all"),gn.forEach(a),_a=i(b," supported cross browser, I will use a transpiler. Because I will want to look into component based development, I choose "),I=o(b,"A",{href:!0,rel:!0});var _n=l(I);ja=i(_n,"Webpack"),_n.forEach(a),Sa=i(b,", also because it is pluggable and has e.g. Typescript support."),b.forEach(a),_s=u(s),$=o(s,"P",{});var jn=l($);xa=i(jn,"Although I am aware of the advantages of TypeScript and it’s adoption should increase with the advent of Angular 2, I will stick with plain ES6 for the moment, to stay as close as possible to the native syntax."),jn.forEach(a),js=u(s),D=o(s,"P",{});var Sn=l(D);Pa=i(Sn,"It is not very clear how to install all the needed dependencies for ES6 compilation with Webpack. It does give feedback on missing modules when running, so with some trial and error, this should be the installer command:"),Sn.forEach(a),Ss=u(s),g=o(s,"PRE",{class:!0});var vt=l(g);vt.forEach(a),xs=u(s),m=o(s,"P",{});var v=l(m);Ta=i(v,"Because "),_=o(v,"A",{href:!0,rel:!0});var xn=l(_);Ma=i(xn,"JShint"),xn.forEach(a),Aa=i(v," and "),j=o(v,"A",{href:!0,rel:!0});var Pn=l(j);Fa=i(Pn,"JSCS"),Pn.forEach(a),qa=i(v," do not support ES6 syntax, I replace them with "),S=o(v,"A",{href:!0,rel:!0});var Tn=l(S);Ha=i(Tn,"ESlint"),Tn.forEach(a),Ca=i(v,":"),v.forEach(a),Ps=u(s),x=o(s,"PRE",{class:!0});var Et=l(x);Et.forEach(a),Ts=u(s),V=o(s,"P",{});var Mn=l(V);Ra=i(Mn,"I integrate Webpack and ESlint into Grunt, this is very straight-forward:"),Mn.forEach(a),Ms=u(s),P=o(s,"PRE",{class:!0});var It=l(P);It.forEach(a),As=u(s),z=o(s,"P",{});var An=l(z);La=i(An,"Both Webpack and ESlint changed the syntax for their configuration since the last time I used it, my configs look like this now:"),An.forEach(a),Fs=u(s),G=o(s,"UL",{});var Fn=l(G);ws=o(Fn,"LI",{});var qn=l(ws);Ba=i(qn,"Webpack 1.13.0"),qn.forEach(a),Fn.forEach(a),qs=u(s),T=o(s,"PRE",{class:!0});var gt=l(T);gt.forEach(a),Hs=u(s),N=o(s,"UL",{});var Hn=l(N);bs=o(Hn,"LI",{});var Cn=l(bs);Ka=i(Cn,"ESlint (grunt-eslint 18.1.0)"),Cn.forEach(a),Hn.forEach(a),Cs=u(s),M=o(s,"PRE",{class:!0});var _t=l(M);_t.forEach(a),Rs=u(s),U=o(s,"H1",{});var Rn=l(U);Wa=i(Rn,"The Entrypoint"),Rn.forEach(a),Ls=u(s),Y=o(s,"P",{});var Ln=l(Y);Ja=i(Ln,"The file app.js is the main entrypoint. It imports all the factories and classes as dependencies and registers them to our application API (bqApp). E.g.:"),Ln.forEach(a),Bs=u(s),A=o(s,"PRE",{class:!0});var jt=l(A);jt.forEach(a),Ks=u(s),Q=o(s,"P",{});var Bn=l(Q);Oa=i(Bn,`The registering used to be done in e.g. the customModelFactory file itself, but when using ES6 modules, I started to notice how this requires a dependency to bqApp in the customModelFactory file, while it’s only needed for registering the factory. For the sake of
high cohesion, I decided to export the finished factory and register it in the app.js instead.`),Bn.forEach(a),Ws=u(s),X=o(s,"P",{});var Kn=l(X);$a=i(Kn,"In advance, one of my main concerns was handling existing variables that the application API puts on the global scope, because the API is not yet in ES6 style. Fortunately, in contrast to Typescript it is not needed to have typing definitions, making it trivial to mix ES5 and ES6 libraries in one app. Because ES6 modules are used in the app.js, it is no longer needed to use an IIFE for scoping (the ES6 modules are scoped at the file level anyway) or strict mode declaration (implicit, because strict mode indicates ES5 syntax). This does mean I need an alternative way to reference global variables. E.g. the bqApp variable is put on the global scope by the application API, which I can’t change at the moment, instead of being exposed as an importable module. Supposedly, it would be possible to wrap it in a file that converts the global to a module. For the short term I see two options, though:"),Kn.forEach(a),Js=u(s),h=o(s,"OL",{});var da=l(h);Z=o(da,"LI",{});var yn=l(Z);vs=o(yn,"CODE",{});var Wn=l(vs);Da=i(Wn,"/* global bqApp:false */"),Wn.forEach(a),Va=i(yn," - this works because the var is on the global scope, it’s just ESlint who warns for undefined variables."),yn.forEach(a),za=u(da),ss=o(da,"LI",{});var wn=l(ss);Es=o(wn,"CODE",{});var Jn=l(Es);Ga=i(Jn,"const bqApp = window.bqApp;"),Jn.forEach(a),Na=i(wn," - explicitly reassinging to a local variable, which is basically what I used to do when supplying window.bqApp as a parameter to an IIFE, and then declaring bqApp as an argument in that IIFE."),wn.forEach(a),da.forEach(a),Os=u(s),as=o(s,"P",{});var On=l(as);Ua=i(On,"For the moment I will stick with option 1, although I have included an example of both just to be complete."),On.forEach(a),$s=u(s),ns=o(s,"H1",{});var $n=l(ns);Ya=i($n,"Viewmodels and the viewmodel factory"),$n.forEach(a),Ds=u(s),ts=o(s,"P",{});var Dn=l(ts);Qa=i(Dn,"Most viewmodels that we use extend from some existing viewmodel that is build into the application API, such as blueriq.models.BaseModel. A very simple example:"),Dn.forEach(a),Vs=u(s),F=o(s,"PRE",{class:!0});var St=l(F);St.forEach(a),zs=u(s),es=o(s,"P",{});var Vn=l(es);Xa=i(Vn,"As said, I was concerned about using existing variables from the application API. I had no idea how the ES6 “extend” would convert to ES5, but fortunately it seems to be backwards compatible with the approach above, because this simply works:"),Vn.forEach(a),Gs=u(s),q=o(s,"PRE",{class:!0});var xt=l(q);xt.forEach(a),Ns=u(s),ps=o(s,"P",{});var zn=l(ps);Za=i(zn,"Now PageModel can be imported into the modelFactory, which decides what viewModel to use based on properties of the provided model."),zn.forEach(a),Us=u(s),H=o(s,"PRE",{class:!0});var Pt=l(H);Pt.forEach(a),Ys=u(s),os=o(s,"P",{});var Gn=l(os);sn=i(Gn,"It has already been shown how otherCustomModelFactory is imported and registered in app.js."),Gn.forEach(a),Qs=u(s),ls=o(s,"H1",{});var Nn=l(ls);an=i(Nn,"Templates"),Nn.forEach(a),Xs=u(s),cs=o(s,"P",{});var Un=l(cs);nn=i(Un,"Creating a templateFactory, which decides what template to use based on properties of the provided model, is nearly identical to the modelFactory:"),Un.forEach(a),Zs=u(s),C=o(s,"PRE",{class:!0});var Tt=l(C);Tt.forEach(a),sa=u(s),y=o(s,"P",{});var ma=l(y);tn=i(ma,"At this moment, the factory just returns the id of the template. The template itself is requested from the filesystem by the "),R=o(ma,"A",{href:!0,rel:!0});var Yn=l(R);en=i(Yn,"koExternalTemplateEngine"),Yn.forEach(a),pn=i(ma," (this project has been retired for several years now) or with a custom solution that reads the template from a file that contains all templates. A very important improvement that could be made here is using Webpack to resolve the paths to the templates. It should be possible to write a custom loader that retrieves the contents of a template that is being imported, e.g. like this:"),ma.forEach(a),aa=u(s),L=o(s,"PRE",{class:!0});var Mt=l(L);Mt.forEach(a),na=u(s),is=o(s,"H1",{});var Qn=l(is);on=i(Qn,"Custom Binding Handlers"),Qn.forEach(a),ta=u(s),w=o(s,"P",{});var fa=l(w);ln=i(fa,"Knockout "),B=o(fa,"A",{href:!0,rel:!0});var Xn=l(B);cn=i(Xn,"handlers"),Xn.forEach(a),rn=i(fa," need to be registered to ko.bindingHandlers, e.g. like this:"),fa.forEach(a),ea=u(s),K=o(s,"PRE",{class:!0});var At=l(K);At.forEach(a),pa=u(s),rs=o(s,"P",{});var Zn=l(rs);un=i(Zn,"If I would put this in a module, nothing would be exported. I still need to look into how the system would handle this. Probably it will just execute adding the bindinghandler and return nothing, but for the moment I just export the body of the handler and import and register it in our app.js."),Zn.forEach(a),oa=u(s),us=o(s,"P",{});var st=l(us);kn=i(st,"In handlers/clickTester.js:"),st.forEach(a),la=u(s),W=o(s,"PRE",{class:!0});var Ft=l(W);Ft.forEach(a),ca=u(s),ks=o(s,"P",{});var at=l(ks);dn=i(at,"In app.js:"),at.forEach(a),ia=u(s),J=o(s,"PRE",{class:!0});var qt=l(J);qt.forEach(a),ra=u(s),ds=o(s,"H1",{});var nt=l(ds);mn=i(nt,"Follow up"),nt.forEach(a),ua=u(s),ms=o(s,"P",{});var tt=l(ms);fn=i(tt,"I still need to improve the registration of handlers, I don’t know if I want them all in my app.js or maybe in a separate file. In that case I will need to figure out how to export “nothing” to my app.js, otherwise the import statement might fail."),tt.forEach(a),ka=u(s),fs=o(s,"P",{});var et=l(fs);hn=i(et,"So far, our product does not use Knockout components. The style of component based development is very similar to React or Angular 2.0 components, although in practice, it might be closer to Angular 1.x directives. It would be interesting to see how it would translate to the ES6 syntax."),et.forEach(a),this.h()},h(){k(E,"href","https://bitbucket.org/mdvanes/homeremote"),k(E,"rel","nofollow"),k(I,"href","https://webpack.github.io/"),k(I,"rel","nofollow"),k(g,"class","language-bash"),k(_,"href","https://github.com/gruntjs/grunt-contrib-jshint"),k(_,"rel","nofollow"),k(j,"href","https://github.com/jscs-dev/grunt-jscs"),k(j,"rel","nofollow"),k(S,"href","https://github.com/jscs-dev/grunt-jscs"),k(S,"rel","nofollow"),k(x,"class","language-bash"),k(P,"class","language-javascript"),k(T,"class","language-javascript"),k(M,"class","language-json"),k(A,"class","language-javascript"),k(F,"class","language-javascript"),k(q,"class","language-javascript"),k(H,"class","language-javascript"),k(C,"class","language-javascript"),k(R,"href","https://github.com/ifandelse/Knockout.js-External-Template-Engine"),k(R,"rel","nofollow"),k(L,"class","language-javascript"),k(B,"href","http://knockoutjs.com/documentation/custom-bindings.html"),k(B,"rel","nofollow"),k(K,"class","language-javascript"),k(W,"class","language-javascript"),k(J,"class","language-javascript")},m(s,n){t(s,f,n),e(f,ha),e(f,E),e(E,ya),e(f,wa),t(s,Is,n),t(s,O,n),e(O,ba),t(s,gs,n),t(s,d,n),e(d,va),e(d,hs),e(hs,Ea),e(d,Ia),e(d,ys),e(ys,ga),e(d,_a),e(d,I),e(I,ja),e(d,Sa),t(s,_s,n),t(s,$,n),e($,xa),t(s,js,n),t(s,D,n),e(D,Pa),t(s,Ss,n),t(s,g,n),g.innerHTML=ot,t(s,xs,n),t(s,m,n),e(m,Ta),e(m,_),e(_,Ma),e(m,Aa),e(m,j),e(j,Fa),e(m,qa),e(m,S),e(S,Ha),e(m,Ca),t(s,Ps,n),t(s,x,n),x.innerHTML=lt,t(s,Ts,n),t(s,V,n),e(V,Ra),t(s,Ms,n),t(s,P,n),P.innerHTML=ct,t(s,As,n),t(s,z,n),e(z,La),t(s,Fs,n),t(s,G,n),e(G,ws),e(ws,Ba),t(s,qs,n),t(s,T,n),T.innerHTML=it,t(s,Hs,n),t(s,N,n),e(N,bs),e(bs,Ka),t(s,Cs,n),t(s,M,n),M.innerHTML=rt,t(s,Rs,n),t(s,U,n),e(U,Wa),t(s,Ls,n),t(s,Y,n),e(Y,Ja),t(s,Bs,n),t(s,A,n),A.innerHTML=ut,t(s,Ks,n),t(s,Q,n),e(Q,Oa),t(s,Ws,n),t(s,X,n),e(X,$a),t(s,Js,n),t(s,h,n),e(h,Z),e(Z,vs),e(vs,Da),e(Z,Va),e(h,za),e(h,ss),e(ss,Es),e(Es,Ga),e(ss,Na),t(s,Os,n),t(s,as,n),e(as,Ua),t(s,$s,n),t(s,ns,n),e(ns,Ya),t(s,Ds,n),t(s,ts,n),e(ts,Qa),t(s,Vs,n),t(s,F,n),F.innerHTML=kt,t(s,zs,n),t(s,es,n),e(es,Xa),t(s,Gs,n),t(s,q,n),q.innerHTML=dt,t(s,Ns,n),t(s,ps,n),e(ps,Za),t(s,Us,n),t(s,H,n),H.innerHTML=mt,t(s,Ys,n),t(s,os,n),e(os,sn),t(s,Qs,n),t(s,ls,n),e(ls,an),t(s,Xs,n),t(s,cs,n),e(cs,nn),t(s,Zs,n),t(s,C,n),C.innerHTML=ft,t(s,sa,n),t(s,y,n),e(y,tn),e(y,R),e(R,en),e(y,pn),t(s,aa,n),t(s,L,n),L.innerHTML=ht,t(s,na,n),t(s,is,n),e(is,on),t(s,ta,n),t(s,w,n),e(w,ln),e(w,B),e(B,cn),e(w,rn),t(s,ea,n),t(s,K,n),K.innerHTML=yt,t(s,pa,n),t(s,rs,n),e(rs,un),t(s,oa,n),t(s,us,n),e(us,kn),t(s,la,n),t(s,W,n),W.innerHTML=wt,t(s,ca,n),t(s,ks,n),e(ks,dn),t(s,ia,n),t(s,J,n),J.innerHTML=bt,t(s,ra,n),t(s,ds,n),e(ds,mn),t(s,ua,n),t(s,ms,n),e(ms,fn),t(s,ka,n),t(s,fs,n),e(fs,hn)},p:bn,i:bn,o:bn,d(s){s&&a(f),s&&a(Is),s&&a(O),s&&a(gs),s&&a(d),s&&a(_s),s&&a($),s&&a(js),s&&a(D),s&&a(Ss),s&&a(g),s&&a(xs),s&&a(m),s&&a(Ps),s&&a(x),s&&a(Ts),s&&a(V),s&&a(Ms),s&&a(P),s&&a(As),s&&a(z),s&&a(Fs),s&&a(G),s&&a(qs),s&&a(T),s&&a(Hs),s&&a(N),s&&a(Cs),s&&a(M),s&&a(Rs),s&&a(U),s&&a(Ls),s&&a(Y),s&&a(Bs),s&&a(A),s&&a(Ks),s&&a(Q),s&&a(Ws),s&&a(X),s&&a(Js),s&&a(h),s&&a(Os),s&&a(as),s&&a($s),s&&a(ns),s&&a(Ds),s&&a(ts),s&&a(Vs),s&&a(F),s&&a(zs),s&&a(es),s&&a(Gs),s&&a(q),s&&a(Ns),s&&a(ps),s&&a(Us),s&&a(H),s&&a(Ys),s&&a(os),s&&a(Qs),s&&a(ls),s&&a(Xs),s&&a(cs),s&&a(Zs),s&&a(C),s&&a(sa),s&&a(y),s&&a(aa),s&&a(L),s&&a(na),s&&a(is),s&&a(ta),s&&a(w),s&&a(ea),s&&a(K),s&&a(pa),s&&a(rs),s&&a(oa),s&&a(us),s&&a(la),s&&a(W),s&&a(ca),s&&a(ks),s&&a(ia),s&&a(J),s&&a(ra),s&&a(ds),s&&a(ua),s&&a(ms),s&&a(ka),s&&a(fs)}}}const Kt={title:"KnockoutJS and ES6",cover:"https://picsum.photos/800/600?image=3",date:"07-05-2016",category:"webdevelopment",tags:["webdevelopment"],preview:"In the past year I’ve made some ES6 projects, for instance HomeRemote, an ES6 flavored React project. My company mainly uses a KnockoutJS based theme and it would be an improvement to introduce ES6 to this theme. The combination of Knockout and ES6...",previewHtml:'<p>In the past year I’ve made some ES6 projects, for instance <a href="https://bitbucket.org/mdvanes/homeremote" rel="nofollow">HomeRemote</a>, an ES6 flavored React project. My company mainly uses a KnockoutJS based theme and it would be an improvement to introduce ES6 to this theme. The combination of Knockout and ES6 i...</p>'};class Wt extends Ht{constructor(f){super(),Ct(this,f,null,Lt,Rt,{})}}export{Wt as default,Kt as metadata};
